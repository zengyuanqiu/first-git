(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68b38a4a"],{"09ae":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"page flex-v"},[o("div",{staticClass:"head flex-v-center flex-justify"},[o("div",{staticClass:"head-title"},[e._v("机构维护")]),e.btns.hasInsert?o("div",{staticClass:"head-btn",attrs:{"data-btn-id":"106001001"},on:{click:function(t){return e.openDialog("insert")}}},[o("img",{attrs:{src:a("1d89"),alt:"新增"}}),e._v(" "),o("span",[e._v("新增")])]):e._e()]),o("div",{staticClass:"query-form"},[o("el-form",{staticClass:"default-form-style",attrs:{inline:"",size:"small"}},[o("el-form-item",{attrs:{label:"机构编码："}},[o("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.querys.sysGuid,callback:function(t){e.$set(e.querys,"sysGuid",t)},expression:"querys.sysGuid"}})],1),o("el-form-item",{attrs:{label:"上级机构名称："}},[o("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.querys.parentName,callback:function(t){e.$set(e.querys,"parentName",t)},expression:"querys.parentName"}})],1),o("el-form-item",{attrs:{label:"机构名称："}},[o("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.querys.oname,callback:function(t){e.$set(e.querys,"oname",t)},expression:"querys.oname"}})],1),o("el-form-item",[o("el-button",{attrs:{icon:"el-icon-search",round:""},on:{click:function(t){return e.$refs.pagination.initPageList(1)}}},[e._v("查询")])],1)],1)],1),o("div",{staticClass:"table-box flex-item"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,height:"100%","header-cell-class-name":"custom-table-cell",stripe:""}},[o("el-table-column",{attrs:{label:"序号",type:"index"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index;return[e._v("\n          "+e._s(a+(e.pageNum-1)*e.pageSize+1)+"\n        ")]}}])}),o("el-table-column",{attrs:{label:"机构编号",prop:"sysGuid","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{label:"机构名称",prop:"oname"}}),o("el-table-column",{attrs:{label:"上级机构名称",prop:"parentName","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n          "+e._s(e._f("emptyData")(a.parentName))+"\n        ")]}}])}),o("el-table-column",{attrs:{label:"机构类别",prop:"otype"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.orgTypes[a.otype-1]))]}}])}),o("el-table-column",{attrs:{label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[o("span",{class:[1==t.enabled?"status-enable":"status-disable"]})]}}])}),o("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[o("i",{staticClass:"iconfont bj-search",on:{click:function(t){return e.openDialog("see",a)}}}),e.btns.hasUpdate&&1==a.enabled?o("i",{staticClass:"iconfont bj-edit hand-shape",attrs:{"data-btn-id":"106001002"},on:{click:function(t){return e.openDialog("update",a)}}}):e._e()]}}])})],1)],1),o("div",{staticClass:"foot"},[o("bj-pagination",{ref:"pagination",attrs:{"query-url":"/sys/org/listPaging","query-obj":e.querys},on:{listResult:e.getListResult,controlLoading:function(t){e.loading=t}}})],1),o("el-dialog",{staticClass:"flex",attrs:{visible:e.dialogIsShow,"custom-class":"my-dialog",width:"500px",title:e.dialogTitles[e.dialogType],"close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogIsShow=t}}},["see"===e.dialogType?[o("div",{staticClass:"flex"},[o("el-form",{staticClass:"see-style",attrs:{size:"small","label-width":"auto"}},[o("el-form-item",{attrs:{label:"机构编码："}},[e._v("\n            "+e._s(e.dataInfo.sysGuid)+"\n          ")]),o("el-form-item",{attrs:{label:"机构名称："}},[e._v("\n            "+e._s(e.dataInfo.oname)+"\n          ")]),o("el-form-item",{attrs:{label:"上级机构："}},[e._v("\n            "+e._s(e._f("emptyData")(e.dataInfo.parentName))+"\n          ")]),o("el-form-item",{attrs:{label:"所属区域："}},[e._v("\n            "+e._s(e._f("emptyData")(e.regionAddress))+"\n          ")]),o("el-form-item",{attrs:{label:"机构类别："}},[e._v("\n            "+e._s(e.orgTypes[e.dataInfo.otype-1])+"\n          ")]),o("el-form-item",{attrs:{label:"机构地址："}},[e._v("\n            "+e._s(e._f("emptyData")(e.dataInfo.orgAddress))+"\n          ")]),o("el-form-item",{attrs:{label:"联系人："}},[e._v("\n            "+e._s(e._f("emptyData")(e.dataInfo.contacts))+"\n          ")]),o("el-form-item",{attrs:{label:"联系电话："}},[e._v("\n            "+e._s(e._f("emptyData")(e.dataInfo.contactsMobile))+"\n          ")]),o("el-form-item",{attrs:{label:"状态："}},[e._v("\n            "+e._s(1==e.dataInfo.enabled?"启用":"禁用")+"\n          ")])],1)],1),e.btns.hasUpdate?o("div",{attrs:{slot:"footer","data-btn-id":"106001002"},slot:"footer"},[o("el-button",{staticClass:"btn-info",on:{click:function(t){return e.openDialog("update")}}},[e._v("\n          修改\n        ")])],1):e._e()]:[o("el-form",{ref:"form",attrs:{size:"small","label-width":"auto",model:e.formFields,rules:e.rules}},[o("el-form-item",{attrs:{label:"机构名称：",prop:"oname"}},[o("el-input",{attrs:{placeholder:"请输入机构名称",maxlength:"31"},model:{value:e.formFields.oname,callback:function(t){e.$set(e.formFields,"oname",t)},expression:"formFields.oname"}})],1),o("el-form-item",{attrs:{label:"机构类别：",prop:"otype"}},[o("el-select",{staticClass:"block",model:{value:e.formFields.otype,callback:function(t){e.$set(e.formFields,"otype",t)},expression:"formFields.otype"}},[o("el-option",{attrs:{value:"1",label:"医院"}}),o("el-option",{attrs:{value:"2",label:"卫生院"}}),o("el-option",{attrs:{value:"3",label:"卫生所"}})],1)],1),o("el-form-item",{attrs:{label:"上级机构：",prop:"parentId"}},[o("el-select",{staticClass:"block",model:{value:e.formFields.parentId,callback:function(t){e.$set(e.formFields,"parentId",t)},expression:"formFields.parentId"}},e._l(e.parentOrgList,function(e){return o("el-option",{key:e.sysGuid,attrs:{value:e.sysGuid,label:e.oname}})}),1)],1),o("div",{staticClass:"flex"},[o("el-form-item",{attrs:{label:" 所属区域："}}),o("div",{staticClass:"flex flex-item",staticStyle:{"flex-wrap":"wrap"}},[o("el-form-item",{attrs:{"label-width":"0",prop:"provinceId"}},[o("el-select",{attrs:{"popper-class":"select-width"},on:{change:function(t){return e.handleSelect("city",t)}},model:{value:e.formFields.provinceId,callback:function(t){e.$set(e.formFields,"provinceId",t)},expression:"formFields.provinceId"}},e._l(e.provinceList,function(e){return o("el-option",{key:e.provinceId,attrs:{value:e.provinceId,label:e.provinceName}})}),1)],1),o("el-form-item",{attrs:{"label-width":"0",prop:"cityId"}},[o("el-select",{on:{change:function(t){return e.handleSelect("county",t)}},model:{value:e.formFields.cityId,callback:function(t){e.$set(e.formFields,"cityId",t)},expression:"formFields.cityId"}},e._l(e.cityList,function(e){return o("el-option",{key:e.cityId,attrs:{value:e.cityId,label:e.cityName}})}),1)],1),o("el-form-item",{attrs:{"label-width":"0",prop:"areaId"}},[o("el-select",{on:{change:function(t){return e.handleSelect("town",t)}},model:{value:e.formFields.areaId,callback:function(t){e.$set(e.formFields,"areaId",t)},expression:"formFields.areaId"}},e._l(e.countyList,function(e){return o("el-option",{key:e.countyId,attrs:{value:e.countyId,label:e.countyName}})}),1)],1),o("el-form-item",{attrs:{"label-width":"0",prop:"streetId"}},[o("el-select",{on:{change:function(t){return e.handleSelect("village",t)}},model:{value:e.formFields.streetId,callback:function(t){e.$set(e.formFields,"streetId",t)},expression:"formFields.streetId"}},e._l(e.townList,function(e){return o("el-option",{key:e.townId,attrs:{value:e.townId,label:e.townName}})}),1)],1),o("el-form-item",{attrs:{"label-width":"0",prop:"communityId"}},[o("el-select",{staticClass:"block",model:{value:e.formFields.communityId,callback:function(t){e.$set(e.formFields,"communityId",t)},expression:"formFields.communityId"}},e._l(e.villageList,function(e){return o("el-option",{key:e.villageId,attrs:{value:e.villageId,label:e.villageName}})}),1)],1)],1)],1),o("el-form-item",{attrs:{label:"机构地址：",prop:"orgAddress"}},[o("el-input",{attrs:{placeholder:"请输入机构地址",maxlength:"51"},model:{value:e.formFields.orgAddress,callback:function(t){e.$set(e.formFields,"orgAddress",t)},expression:"formFields.orgAddress"}})],1),o("el-form-item",{attrs:{label:"联系人：",prop:"contacts"}},[o("el-input",{attrs:{placeholder:"请输入联系人",maxlength:"11"},model:{value:e.formFields.contacts,callback:function(t){e.$set(e.formFields,"contacts",t)},expression:"formFields.contacts"}})],1),o("el-form-item",{attrs:{label:"联系电话：",prop:"contactsMobile"}},[o("el-input",{attrs:{placeholder:"请输入联系电话",maxlength:"13"},model:{value:e.formFields.contactsMobile,callback:function(t){e.$set(e.formFields,"contactsMobile","string"===typeof t?t.trim():t)},expression:"formFields.contactsMobile"}})],1),o("el-form-item",{attrs:{label:"状态：",prop:"enabled"}},[o("el-select",{staticClass:"block",attrs:{placeholder:"启用"},model:{value:e.formFields.enabled,callback:function(t){e.$set(e.formFields,"enabled",t)},expression:"formFields.enabled"}},[o("el-option",{attrs:{value:"1",label:"启用"}}),o("el-option",{attrs:{value:"2",label:"禁用"}})],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"btn-hollowing",on:{click:function(t){e.dialogIsShow=!1}}},[e._v("取消")]),o("el-button",{staticClass:"btn-info",attrs:{loading:e.submitLoading},on:{click:e.onSubmit}},[e._v("保存")])],1)]],2)],1)},l=[],i=a("bd86"),n=(a("456d"),a("ac6a"),a("75fc")),s=a("b279"),r={city:{url:"getCity",paramKey:"provinceId",feildKey:"provinceId",clearFeilds:["cityId","areaId","streetId","communityId"],clearData:["countyList","townList","villageList"]},county:{url:"getCounty",paramKey:"cityId",feildKey:"cityId",clearFeilds:["areaId","streetId","communityId"],clearData:["townList","villageList"]},town:{url:"getTown",paramKey:"countyId",feildKey:"areaId",clearFeilds:["streetId","communityId"],clearData:["villageList"]},village:{url:"getVillage",paramKey:"townId",feildKey:"streetId",clearFeilds:["communityId"],clearData:[]}},c="1",d={name:"AgencyManage",data:function(){return{tableData:[],parentOrgList:[],provinceList:[],cityList:[],countyList:[],townList:[],villageList:[],querys:{oname:"",parentName:"",sysGuid:""},pageNum:1,pageSize:10,formFields:{sysGuid:"",otype:"",oname:"",provinceId:"",provinceName:"",cityId:"",cityName:"",areaId:"",areaName:"",streetId:"",streetName:"",communityId:"",communityName:"",orgAddress:"",contacts:"",contactsMobile:"",enabled:c,oemail:"",ologo:"",parentId:"",parentName:""},rules:{otype:{required:!0,message:"请选择机构类别"},oname:[{required:!0,message:"请输入机构名称",trigger:"blur",whitespace:!0}].concat(Object(n["a"])(Object(s["i"])(30))),parentId:{required:!0,message:"请选择上级机构"},contactsMobile:{pattern:s["n"],message:"请输入正确的电话号码",trigger:"blur"},orgAddress:{max:50,message:"最多输入50个字符"},contacts:{max:10,message:"最多输入10个字符"}},dataInfo:{},dialogIsShow:!1,dialogType:"",loading:!0,submitLoading:!1}},created:function(){this.initStatic()},methods:{initStatic:function(){this.dialogTitles={see:"查看",insert:"新增",update:"修改"},this.orgTypes=["医院","卫生院","卫生所"]},getListResult:function(e){var t=e.list,a=e.pageNum,o=e.pageSize;this.tableData=t,this.pageNum=a,this.pageSize=o},openDialog:function(e,t){var a=this;this.getOrgList(),this.getProvince(),this.dialogIsShow=!0,this.dialogType=e,"insert"===e?(Object.keys(this.formFields).forEach(function(e){a.formFields[e]=""}),this.formFields.enabled=c):(this.dataInfo=t||this.dataInfo,Object.keys(this.formFields).forEach(function(e){a.formFields[e]=0===a.dataInfo[e]?"":a.dataInfo[e]}),this.formFields.sysGuid=this.dataInfo.sysGuid,"update"===e&&Object.keys(r).forEach(function(e){var t=r[e],o=t.url,l=t.feildKey,n=t.paramKey;a.dataInfo[l]&&a.getRangeData(o,e,Object(i["a"])({},n,a.dataInfo[l]))})),this.$nextTick(function(e){"see"!==a.dialogType&&a.$refs.form.clearValidate()})},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(t){e.submitLoading=!0;var a="/sys/org/".concat(e.dialogType),o=e.dialogTitles[e.dialogType];e.$post(a,e.formFields).then(function(t){e.submitLoading=!1,e.dialogIsShow=!1,e.$refs.pagination.initPageList(),e.$store.dispatch("getOrgList"),e.$message.success("".concat(o,"成功"))}).catch(function(t){e.submitLoading=!1,e.$message.error(t)})}})},handleSelect:function(e,t){var a=this,o=r[e],l=o.url,n=o.clearFeilds,s=o.clearData,c=o.paramKey;n.forEach(function(e){a.formFields[e]=""}),s.forEach(function(e){a[e]=[]}),this.getRangeData(l,e,Object(i["a"])({},c,t))},getRangeData:function(e,t,a){var o=this;this.$post("/dict/".concat(e),a).then(function(e){var a=e.data;o["".concat(t,"List")]=a}).catch(function(e){return o.$message.error(e)})},getProvince:function(){var e=this;this.provinceList.length||this.$post("/dict/getProvince").then(function(t){var a=t.data;e.provinceList=a}).catch(function(t){return e.$message.error(t)})},getOrgList:function(){var e=this;this.parentOrgList.length||this.$post("/sys/org/selectThisOrgAllChildOrg").then(function(t){var a=t.data;e.parentOrgList=a}).catch(function(t){return e.$message.error(t)})}},computed:{regionAddress:function(){var e=this;if("see"===this.dialogType){if(!this.dataInfo.provinceId)return"";var t=["provinceName","cityName","areaName","streetName","communityName"].map(function(t){return e.dataInfo[t]?e.dataInfo[t]:""});return t.join("")}},btns:function(){var e=this.$store.state.btnAuthorityIds;return{hasInsert:~e.indexOf("106001001"),hasUpdate:~e.indexOf("106001002"),hasDel:~e.indexOf("106001003")}}},watch:{}},u=d,f=(a("ebc7"),a("2877")),m=Object(f["a"])(u,o,l,!1,null,"650792d6",null);t["default"]=m.exports},1067:function(e,t,a){},"1d89":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAADL0lEQVRIiZ2VP6idRRDFf4e7795CUBCUF2KE50sRBAWFoAGtBEEMNnYWYikSG0sLK4tUQYgiWIiVBEQtnhAbC0EiGItXv8JOFBFCilxQzB6L2T/zXVP5Nffu7uycmTNnZnVw8u79wFXgVeA+/t/3D3ATeAs43j0seHUV8boNiF8xf0lx6B1jtT0ZrG4hgDOYCxLXDWeBO91GQKmsLoJAvAIc0S7b3W0HMHWs+3mzEQ+Db9g6BD+L9F0EYwwUe+9B8J9CRzny7kRqGdkYgdqvTWQsMH8YLgMvCm7ZAVAVuRezB/Y20+Mg5gzoKdubTtOgakQiPFe3gS+AQ8Mh6LbhB8y2mAL5YgC8DVwBygBXc6qZ5oJRL+toCap/Ay4Wez1AGjWPyL4CKlYUVsNpGMxKBZ7suDyF0NFOAR+V6r0eZi/2k8YlAlYvc05nEbEgBGGn05yezkcmy5w1oha4aVtEtHYorUMYY0W2FS2ybN+q1AHSUu4RSVAboqD2yofTr7G/BSHxns3p7rEumisCLNWbIVM1RzU4IKsKZhPK/AT+BItqLqEA0X/9g6GYzeiJIUcHqgeLnmt3iYe9IKJSE52S98Z+sde9L3bUqNGx7KyVSlyTz355eovNctcb4B7UzADBvgY6rpOM7xM1H2AeSkS9YTi3qIkbiAew57oOlR2BP8/dF38N1qfLUarnEefAwVwUfh0zrmagltkU3HSRa1XDMI+abi+3/pEpZg2VVZUacnjvXLe994F3ZtH9IeazZn0txntvaJ3FboGE9kutm7uIU5jHjH/pRQvVtElqDiQOBk32fpu+gB8HnuhiGB2f0i+VvZ9lPWP4UXDZcJLEOQdfqteiIxaDcd7LPVPw+s0K14F90AvGJ+rjo5MtDSdToqNK88VkSryO4opSWR9jDoHnDFvggR70aC73kdAP9BrwdJvSj84W6U2b7A0qN2/tJMfLwDeTBOUBnr5EzT1YzLmFuvKTJ/09jPKUGe+IEjRMkhrK4t02wLZUr4bPhnND5nek/TywYhr0UZ5UlHNKthrzz18WXBaPmeEO8BLmY8R5YJWbMVV5Xup3lcvGFvgKuPQv8WHfKjqAI4QAAAAASUVORK5CYII="},"20fd":function(e,t,a){"use strict";var o=a("d9f6"),l=a("aebd");e.exports=function(e,t,a){t in e?o.f(e,t,l(0,a)):e[t]=a}},"549b":function(e,t,a){"use strict";var o=a("d864"),l=a("63b6"),i=a("241e"),n=a("b0dc"),s=a("3702"),r=a("b447"),c=a("20fd"),d=a("7cd6");l(l.S+l.F*!a("4ee1")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,l,u,f=i(e),m="function"==typeof this?this:Array,p=arguments.length,b=p>1?arguments[1]:void 0,g=void 0!==b,v=0,y=d(f);if(g&&(b=o(b,p>2?arguments[2]:void 0,2)),void 0==y||m==Array&&s(y))for(t=r(f.length),a=new m(t);t>v;v++)c(a,v,g?b(f[v],v):f[v]);else for(u=y.call(f),a=new m;!(l=u.next()).done;v++)c(a,v,g?n(u,b,[l.value,v],!0):l.value);return a.length=v,a}})},"54a1":function(e,t,a){a("6c1c"),a("1654"),e.exports=a("95d5")},"75fc":function(e,t,a){"use strict";var o=a("a745"),l=a.n(o);function i(e){if(l()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var n=a("774e"),s=a.n(n),r=a("c8bb"),c=a.n(r);function d(e){if(c()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return s()(e)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e){return i(e)||d(e)||u()}a.d(t,"a",function(){return f})},"774e":function(e,t,a){e.exports=a("d2d5")},"95d5":function(e,t,a){var o=a("40c3"),l=a("5168")("iterator"),i=a("481b");e.exports=a("584a").isIterable=function(e){var t=Object(e);return void 0!==t[l]||"@@iterator"in t||i.hasOwnProperty(o(t))}},c8bb:function(e,t,a){e.exports=a("54a1")},d2d5:function(e,t,a){a("1654"),a("549b"),e.exports=a("584a").Array.from},ebc7:function(e,t,a){"use strict";var o=a("1067"),l=a.n(o);l.a}}]);
//# sourceMappingURL=chunk-68b38a4a.56e5e74f.js.map
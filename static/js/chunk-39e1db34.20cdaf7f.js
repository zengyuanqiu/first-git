(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39e1db34"],{"32f9":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"page flex-v"},[a("div",{staticClass:"head flex-v-center"},[a("el-breadcrumb",{staticClass:"my-breadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{name:"CheckIn"}}},[t._v("登记台")]),a("el-breadcrumb-item",[t._v("体检详情")])],1)],1),a("div",{staticClass:"container flex-item"},[a("div",{staticClass:"top"},[t._m(0),a("div",{staticClass:"top-content flex"},[a("div",{staticClass:"avatar-box"},[a("div",{staticClass:"avatar flex-center flex-v-center"},[t.userData.addOn1?a("img",{attrs:{src:t.userData.addOn1}}):[2==t.userData.sexType?a("img",{attrs:{src:e("1b66"),alt:""}}):a("img",{attrs:{src:e("9717"),alt:""}})]],2)]),a("el-form",{staticClass:"form-box",attrs:{size:"small","label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"体检流水号："}},[a("span",{staticClass:"text"},[t._v(t._s(t.userData.sysGuid))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"姓名："}},[a("span",{staticClass:"text"},[t._v(t._s(t.userData.userName))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"性别："}},[a("span",{staticClass:"text"},[t._v("\n                  "+t._s(1==t.userData.sexType?"男":2==t.userData.sexType?"女":"不详")+"\n                ")])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"出生日期："}},[a("span",{staticClass:"text"},[t._v(t._s(t._f("formatDate")(t.userData.birthday)))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"体检次数："}},[a("span",{staticClass:"text"},[t._v(t._s(t.examNum))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"年龄："}},[a("span",{staticClass:"text"},[t._v(t._s(t.userData.age))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"民族："}},[a("span",{staticClass:"text"},[t._v(t._s(t.userData.nationCase))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"身份证号："}},[a("span",{staticClass:"text"},[t._v(t._s(t.userData.idNo))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"体检日期："}},[a("span",{staticClass:"text"},[t._v(t._s(t._f("formatDate")(t.userData.examDate)))])])],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"户籍地址："}},[a("span",{staticClass:"text"},[t._v(t._s(t.userData.residenceAddress))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"操作医生："}},[a("span",{staticClass:"text"},[t._v(t._s(t.userData.createUserName))])])],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"现住址："}},[a("span",{staticClass:"text"},[t._v(t._s(t.userData.liveAddress))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"联系电话："}},[a("span",{staticClass:"text"},[t._v(t._s(t.userData.contactPhone))])])],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"医疗机构："}},[a("span",{staticClass:"text"},[t._v(t._s(t.userData.createOrganizationName))])])],1)],1)],1)],1)]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"body"},[a("div",{staticClass:"down-box"},[t._m(1),a("div",{staticClass:"item-box flex-inline"},[a("dl",[t._m(2),t._l(t.list,function(s,e){return a("dd",{key:e,staticClass:"flex"},[a("div",{staticClass:"side-left"},[t._v(t._s(s.pname))]),a("div",{staticClass:"content-right flex-item"},[t._v(t._s(s.smallName))])])})],2)])])])]),a("footer",{staticClass:"btn-box"},[1==t.userData.examStatus?a("el-button",{staticClass:"btn-info",on:{click:t.edit}},[t._v("修改")]):t._e(),a("el-button",{staticClass:"btn-red",attrs:{loading:t.printLoading},on:{click:t.beforePrint}},[t._v("打印指引单")])],1)]),a("div",{ref:"print-html-box",staticStyle:{position:"absolute",top:"0",left:"-8000px"}},[a("guide-sheet-html",{staticClass:"guide-sheet",attrs:{user:t.user,guideSheetData:t.guideSheetData}})],1),a("el-dialog",{staticClass:"flex",attrs:{visible:t.isShowDialog,title:"指引单",width:"1120px",center:""},on:{"update:visible":function(s){t.isShowDialog=s}}},[a("guide-sheet-html",{staticClass:"guide-sheet",attrs:{user:t.user,guideSheetData:t.guideSheetData}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-hollowing",on:{click:function(s){t.isShowDialog=!1}}},[t._v("取消")]),a("el-button",{staticClass:"btn-info",on:{click:t.printGuide}},[t._v("打印")])],1)],1)],1)},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"top-head"},[e("i",{staticClass:"iconfont bj-person"}),t._v("  体检人员\n      ")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("h4",{staticClass:"flex"},[e("div",{staticClass:"icon-box"},[e("div",{staticClass:"icon-block"})]),t._v("包含项目\n          ")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("dt",{staticClass:"flex"},[e("div",{staticClass:"side-left"},[t._v("项目名称")]),e("div",{staticClass:"content-right flex-item"},[t._v("小项名称")])])}],l=e("cebc"),r=(e("28a5"),e("ac6a"),e("7dae")),n=e("9ff9"),c=(e("b279"),{name:"CheckInDetail",components:{GuideSheetHtml:n["a"]},data:function(){return{tjsysGuid:"",sysGuid:"",bigProject:[],smallProject:[],userData:{sysGuid:""},smallprojectData:[],guideSheetData:[],user:{},examNum:"",printLoading:!1,isShowDialog:!1}},created:function(){this.tjsysGuid=this.$route.query.tjsysGuid,this.sysGuid=this.$route.query.sysGuid,this.getData(this.tjsysGuid)},computed:{list:function(){var t=this;return this.bigProject.map(function(s){var e={pname:s.pname,smallName:[]};return t.smallProject.forEach(function(t){s.sysGuid===t.parentId&&e.smallName.push(t.pname)}),e.smallName=e.smallName.join("、"),e})}},methods:{getData:function(t){var s=this,e="/sys/project/getShowExam";this.$post(e,{sysGuid:t}).then(function(t){var e=t.data;s.getExamNum(e.user.idNo),s.bigProject=e.bigProject,s.smallProject=e.smallProject,s.userData=e.user}).catch(function(t){t&&s.$message.error(t)})},getExamNum:function(t){var s=this;this.$post("/user/examUser/getExamTimes",{idNo:t,type:"total"}).then(function(t){var e=t.data;s.examNum=e.split(",")[0]}).catch(function(t){return t})},getGuideSheet:function(t){var s=this;this.$post("/user/examUser/showReportGuide",{examUserId:t}).then(function(t){var e=t.data,a=e.deptList,i=e.projectList,r=e.user;s.user=r,s.guideSheetData=a.map(function(t){var s=i.filter(function(s){return s.deptId===t.sysGuid});return Object(l["a"])({},t,{projectList:s})}),console.log(s.guideSheetData)})},edit:function(){this.$router.push({name:"CheckInPerson",query:{tjsysGuid:this.tjsysGuid,sysGuid:this.sysGuid}})},printGuide:function(){return Object(r["a"])(this.$refs["print-html-box"],"指引单")},beforePrint:function(){var t=this;function s(){var t=this;~navigator.userAgent.indexOf("Chrome")?setTimeout(function(){t.printGuide().then(function(){t.printLoading=!1})},300):(this.isShowDialog=!0,this.printLoading=!1)}if(this.printLoading=!0,this.guideSheetData.length)return s.call(this);this.$post("/user/examUser/showReportGuide",{examUserId:this.tjsysGuid}).then(function(e){var a=e.data,i=a.projectList,l=a.user;t.user=l,t.guideSheetData=i,s.call(t)}).catch(function(s){t.printLoading=!1,t.$message.error(s)})}}}),o=c,u=(e("89af"),e("2877")),d=Object(u["a"])(o,a,i,!1,null,"6a35cb64",null);s["default"]=d.exports},"3bfe":function(t,s,e){},"412c":function(t,s,e){},"6f8c":function(t,s,e){"use strict";var a=e("3bfe"),i=e.n(a);i.a},"89af":function(t,s,e){"use strict";var a=e("412c"),i=e.n(a);i.a},"9ff9":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"guide-sheet"},[a("div",{staticClass:"head-barcode flex-center"},[a("div",{staticClass:"flex-v-center"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.user.createOrganizationIdLogo,expression:"user.createOrganizationIdLogo"}],staticClass:"logo flex-center flex-v-center",style:{background:t.user.createOrganizationIdLogo?"#fff":"#eee"}},[a("img",{attrs:{src:t.user.createOrganizationIdLogo,alt:"LOGO"}})]),a("div",{staticClass:"barcode-box"},[a("div",{staticClass:"title"},[t._v(t._s(t.user.createOrganizationName))]),a("svg",{attrs:{id:"barcode"}})])])]),a("div",{staticClass:"userinfo flex-v-center"},[a("div",{staticClass:"avatar flex-center flex-v-center",style:{background:t.user.addOn1?"#fff":"#eee"}},[t.user.addOn1?a("img",{attrs:{src:t.user.addOn1,alt:"图像"}}):[2==t.user.sexType?a("img",{attrs:{src:e("1b66"),alt:"图像"}}):a("img",{attrs:{src:e("9717"),alt:"图像"}})]],2),a("div",{staticClass:"info flex-item"},[a("div",{staticClass:"inline-box",staticStyle:{width:"40%"}},[a("label",[t._v("姓名：")]),a("span",[t._v(t._s(t.user.userName))])]),a("div",{staticClass:"inline-box",staticStyle:{width:"20%"}},[a("label",[t._v("性别：")]),a("span",[t._v(t._s(1==t.user.sexType?"男":2==t.user.sexType?"女":"不详"))])]),a("div",{staticClass:"inline-box",staticStyle:{width:"20%"}},[a("label",[t._v("年龄：")]),a("span",[t._v(t._s(t.user.age))])]),a("div",{staticClass:"inline-box",staticStyle:{width:"20%"}},[a("label",[t._v("体检次数：")]),a("span",[t._v(t._s(t.user.examNum))])]),a("div",{staticClass:"inline-box",staticStyle:{width:"33%"}},[a("label",[t._v("民族：")]),a("span",[t._v(t._s(t._f("emptyData")(t.user.nationCase)))])]),a("div",{staticClass:"inline-box",staticStyle:{width:"34%"}},[a("label",[t._v("开单人员：")]),a("span",[t._v(t._s(t.user.createUserName))])]),a("div",{staticClass:"inline-box",staticStyle:{width:"33%"}},[a("label",[t._v("开单时间：")]),a("span",[t._v(t._s(t._f("formatDate")(t.user.createDate)))])]),a("div",{staticClass:"inline-box",staticStyle:{width:"50%"}},[a("label",[t._v("联系电话：")]),a("span",[t._v(t._s(t.user.contactPhone))])]),a("div",{staticClass:"inline-box",staticStyle:{width:"50%"}},[a("label",[t._v("身份证号：")]),a("span",[t._v(t._s(t.user.idNo))])]),a("div",{staticClass:"inline-box",staticStyle:{"min-width":"50%"}},[a("label",[t._v("现住址：")]),a("span",[t._v(t._s(t.user.liveAddress))])])])]),a("div",{staticClass:"content"},[a("div",{staticClass:"title-item"},[t._v("温馨提示")]),a("ol",{staticClass:"ol-list"},t._l(t.headWaring,function(s){return a("li",{key:s},[t._v(t._s(s))])}),0)]),a("div",{staticClass:"content"},[a("dl",{staticClass:"box-item"},[t._m(0),t._l(t.guideSheetData,function(s,e){return a("dd",{key:e,staticClass:"flex"},[a("div",{staticClass:"flex-item flex-v-center"},[a("span",{staticClass:"box-line"}),a("span",{staticClass:"span-text"},[t._v(t._s(s.pname))])]),t._m(1,!0),a("div",{staticClass:"flex-item"})])})],2),a("ol",{staticClass:"ol-list"},t._l(t.endWaring,function(s){return a("li",{key:s},[t._v(t._s(s))])}),0)]),a("div",{staticClass:"footer"},[t._v("\n    欢迎并感谢您前来体检，祝您身体健康！\n  ")])])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("dt",{staticClass:"flex"},[e("div",{staticClass:"flex-item",staticStyle:{"padding-left":"30px"}},[t._v("项目")]),e("div",{staticClass:"autograph"},[t._v("检查医生")]),e("div",{staticClass:"flex-item"},[t._v("体检地点")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"autograph"},[e("div",{staticStyle:{height:"100%","border-bottom":"1px solid #B2B2B2"}})])}],l=(e("28a5"),e("62c5")),r=e.n(l),n={name:"GuideSheetHtml",props:{user:{type:Object,default:function(){return{}}},guideSheetData:{type:Array,default:function(){return[]}}},mounted:function(){console.log(this.guideSheetData)},computed:{endWaring:function(){var t=this.user.endWaring;return t?t.split("@@"):[]},headWaring:function(){var t=this.user.headWaring;return t?t.split("@@"):[]}},methods:{createBarcode:function(t,s,e){r()("#barcode",t,{width:s,height:e})}},watch:{"user.examUserId":function(t){var s=this;t&&this.$nextTick(function(){s.createBarcode(t,2,36)})}}},c=n,o=(e("6f8c"),e("2877")),u=Object(o["a"])(c,a,i,!1,null,"29eafbc0",null);s["a"]=u.exports}}]);
//# sourceMappingURL=chunk-39e1db34.20cdaf7f.js.map
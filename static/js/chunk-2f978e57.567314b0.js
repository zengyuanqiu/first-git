(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f978e57"],{"0a49":function(t,e,s){var a=s("9b43"),i=s("626a"),r=s("4bf8"),n=s("9def"),c=s("cd1c");t.exports=function(t,e){var s=1==t,o=2==t,l=3==t,d=4==t,u=6==t,p=5==t||u,m=e||c;return function(e,c,f){for(var v,h,g=r(e),b=i(g),y=a(c,f,3),j=n(b.length),x=0,C=s?m(e,j):o?m(e,0):void 0;j>x;x++)if((p||x in b)&&(v=b[x],h=y(v,x,g),t))if(s)C[x]=h;else if(h)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:C.push(v)}else if(d)return!1;return u?-1:l||d?d:C}}},"0fdc":function(t,e,s){"use strict";var a=s("bc1a"),i=s.n(a);i.a},1169:function(t,e,s){var a=s("2d95");t.exports=Array.isArray||function(t){return"Array"==a(t)}},"1b66":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAC0CAMAAABBuyXtAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABaUExURff7+e/18/T49/L39e708vX5+O3z8evy8Pb5+Ozz8fP39vH29fD19PH29PP49uzy8O308vb6+e708/X59/D18+3z8vL29fL39vX49/T49vb6+Ozy8fD29O/08ywWxEoAAAQLSURBVHja7dxpcuMgEAVgsTZodbwntu9/zZlMkpqaiSM14gH6wTuA/ZWQULOpedlkmsqqrMqqrMqqrMqqrMqqrMqqrMrixbWDOHlPRN7qY9e6DbAOg6X/Y/vXsqxW0/P4wRVjyR3N5O7KsI40H38pwDpYWox4y80aJ2LEmryslnjxJieLq/rtcvlYfBXRKQ/LdJqCIjKwVKDpPW1qlvK0IqG3VyBLWlqXY0pWT6tzSMZyer2K9qlYzlJMrolYpyhVWCfBZwmKjEvBUrEq6hKw3BTNsglYR4rPFc5yABUNcFaPYFk4a0KwyIBZLURFCswSGJYAszyG5bEsSaAYKOuMYrVQlkCxeijLolg7KItgQbIMjiWBrFccSwFZCsfqgawBx9JAVo9j3YAsgWNxC3oOaw9kjTiWBrI6HMsCWQLH8pT9UeSwbkDWhGMRZX8Us7MkiuWgLLVNVo9iGShLo1hXKGtCsSSUxRv9MFgjljWCWC2W1YFYFyxLgFhnLMuCWAOWxXr9MFhHMEtiWA/Kf88zWDswS2NYHsyaICxHlP/manK/e3gT4cssBWftEKwezmL0XMusE56l4ln4O57TRTSZ6wdmzbXIEilY92jWlILlY1kXShIVydqlYfk41kiJ0kWxTqlYCw9jk7Ne5vddTb7xdEgzzrHebErW7ICxyTRnGlh3NXkmmJ+XqWM4y+wofYZQVjsRFXQ1ufvRfzt7F9qIQw6WDL/lRXqVWvMkpu4f5jrUgv3WsPblIwpdq6VXdZ9OdYkpbFSqnkHGVafSp1BpF1k0vziR92bnzzSDL5iFzNigLxhr4yJvW9krrCDUvF2e3H2nZ0hLeu4GLvbmYTdElzoevWURAbN8VODpgrdudVPqsEMioUdE2jUVvh1CD0aFH6hxXViVb3sZ/B+Jjx/5x/mw5g/WH9Ya70u0fWvW/njUQcBuntVH/HQM6wFYOEzAWuotXBHW4qpLW4S1OJIURViLVcWtBIuxmaQtwGKMivYFWJw9cCY7izXbe8zO4pU4JjOrA+5cwbHYq4wyK4s9RDvlZLXgYSGoDAwZa8hsrKCq2ef68ELg2N+6LKzgubhdjg8vrJghDHc1iVvwsx0TjxPNyuVYL1OyxvXzNl06VtTEszZpWNGTlV0C1gGwpmFbMMuApk+1BLIOwDldjdpqPYKXpKx6i2a5LsGug6m/RrHGByWKnr9kMyzZe0oZ8RrOStJ4315JwyGIddGUKTvlmCx5nChnnjXmN5aylD22c7Msc5+oTHrzI8v0VDDCPGW5OxVO776zLp6K5+8S2ifL7WkT+Vpb/2BJTxvJZ9H/h6VoQ1FfrI42lfMHS9HGot5ZI20u40vj/PZYN9PsaYPRDW0ylVVZlVVZP+YXtvYglRZNDA4AAAAASUVORK5CYII="},"20d6":function(t,e,s){"use strict";var a=s("5ca1"),i=s("0a49")(6),r="findIndex",n=!0;r in[]&&Array(1)[r](function(){n=!1}),a(a.P+a.F*n,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(r)},"20fd":function(t,e,s){"use strict";var a=s("d9f6"),i=s("aebd");t.exports=function(t,e,s){e in t?a.f(t,e,i(0,s)):t[e]=s}},"28a5":function(t,e,s){"use strict";var a=s("aae3"),i=s("cb7c"),r=s("ebd6"),n=s("0390"),c=s("9def"),o=s("5f1b"),l=s("520a"),d=s("79e5"),u=Math.min,p=[].push,m="split",f="length",v="lastIndex",h=4294967295,g=!d(function(){RegExp(h,"y")});s("214f")("split",2,function(t,e,s,d){var b;return b="c"=="abbc"[m](/(b)*/)[1]||4!="test"[m](/(?:)/,-1)[f]||2!="ab"[m](/(?:ab)*/)[f]||4!="."[m](/(.?)(.?)/)[f]||"."[m](/()()/)[f]>1||""[m](/.?/)[f]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!a(t))return s.call(i,t,e);var r,n,c,o=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,m=void 0===e?h:e>>>0,g=new RegExp(t.source,d+"g");while(r=l.call(g,i)){if(n=g[v],n>u&&(o.push(i.slice(u,r.index)),r[f]>1&&r.index<i[f]&&p.apply(o,r.slice(1)),c=r[0][f],u=n,o[f]>=m))break;g[v]===r.index&&g[v]++}return u===i[f]?!c&&g.test("")||o.push(""):o.push(i.slice(u)),o[f]>m?o.slice(0,m):o}:"0"[m](void 0,0)[f]?function(t,e){return void 0===t&&0===e?[]:s.call(this,t,e)}:s,[function(s,a){var i=t(this),r=void 0==s?void 0:s[e];return void 0!==r?r.call(s,i,a):b.call(String(i),s,a)},function(t,e){var a=d(b,t,this,e,b!==s);if(a.done)return a.value;var l=i(t),p=String(this),m=r(l,RegExp),f=l.unicode,v=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(g?"y":"g"),y=new m(g?l:"^(?:"+l.source+")",v),j=void 0===e?h:e>>>0;if(0===j)return[];if(0===p.length)return null===o(y,p)?[p]:[];var x=0,C=0,A=[];while(C<p.length){y.lastIndex=g?C:0;var D,I=o(y,g?p:p.slice(C));if(null===I||(D=u(c(y.lastIndex+(g?0:C)),p.length))===x)C=n(p,C,f);else{if(A.push(p.slice(x,C)),A.length===j)return A;for(var k=1;k<=I.length-1;k++)if(A.push(I[k]),A.length===j)return A;C=x=D}}return A.push(p.slice(x)),A}]})},"549b":function(t,e,s){"use strict";var a=s("d864"),i=s("63b6"),r=s("241e"),n=s("b0dc"),c=s("3702"),o=s("b447"),l=s("20fd"),d=s("7cd6");i(i.S+i.F*!s("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,s,i,u,p=r(t),m="function"==typeof this?this:Array,f=arguments.length,v=f>1?arguments[1]:void 0,h=void 0!==v,g=0,b=d(p);if(h&&(v=a(v,f>2?arguments[2]:void 0,2)),void 0==b||m==Array&&c(b))for(e=o(p.length),s=new m(e);e>g;g++)l(s,g,h?v(p[g],g):p[g]);else for(u=b.call(p),s=new m;!(i=u.next()).done;g++)l(s,g,h?n(u,v,[i.value,g],!0):i.value);return s.length=g,s}})},"54a1":function(t,e,s){s("6c1c"),s("1654"),t.exports=s("95d5")},"75fc":function(t,e,s){"use strict";var a=s("a745"),i=s.n(a);function r(t){if(i()(t)){for(var e=0,s=new Array(t.length);e<t.length;e++)s[e]=t[e];return s}}var n=s("774e"),c=s.n(n),o=s("c8bb"),l=s.n(o);function d(t){if(l()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return c()(t)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){return r(t)||d(t)||u()}s.d(e,"a",function(){return p})},"774e":function(t,e,s){t.exports=s("d2d5")},9141:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page flex-v"},[a("div",{staticClass:"head flex-v-center"},[a("el-breadcrumb",{staticClass:"my-breadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{name:"CheckIn"}}},[t._v("登记台")]),t.prevRoute.isShow?a("el-breadcrumb-item",{attrs:{to:{name:t.prevRoute.name,query:t.prevRoute.query}}},[t._v("\n        "+t._s(t.prevRoute.title)+"\n      ")]):t._e(),a("el-breadcrumb-item",[t._v("\n        "+t._s("add"===t.tjsysGuid?"登记人员":"修改信息")+"\n      ")])],1)],1),a("div",{staticClass:"container flex-item"},[a("div",{staticClass:"top"},[t._m(0),a("div",{staticClass:"top-content flex"},[a("div",{staticClass:"avatar-box"},[a("div",{staticClass:"avatar flex-center flex-v-center"},[t.imageUrl?a("img",{attrs:{src:t.imageUrl}}):[2==t.personData.sexType?a("img",{attrs:{src:s("1b66"),alt:""}}):a("img",{attrs:{src:s("9717"),alt:""}})]],2),t._m(1),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadFileUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"auto-upload":!0,"before-upload":t.beforeAvatarUpload,data:{projectName:"phy"}}},[a("el-button",{staticClass:"btn-info",staticStyle:{width:"150px"},attrs:{size:"small"}},[t._v("本地上传")])],1)],1),a("el-form",{ref:"personData",staticClass:"form-box",attrs:{size:"small",rules:t.rules,model:t.personData,"label-width":"7em"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"体检流水号："}},[t._v(t._s(t._f("emptyData")(t.examsysGuid)))])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"姓名：",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"31"},model:{value:t.personData.userName,callback:function(e){t.$set(t.personData,"userName",e)},expression:"personData.userName"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"性别："}},[a("el-select",{model:{value:t.personData.sexType,callback:function(e){t.$set(t.personData,"sexType",e)},expression:"personData.sexType"}},[a("el-option",{attrs:{value:1,label:"男"}}),a("el-option",{attrs:{value:2,label:"女"}}),a("el-option",{attrs:{value:3,label:"不详"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"出生日期："}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd","picker-options":{disabledDate:function(t){return t>new Date}}},model:{value:t.personData.birthday,callback:function(e){t.$set(t.personData,"birthday",e)},expression:"personData.birthday"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"体检次数："}},[t._v("\n                "+t._s(t.examNum)+"\n              ")])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"年龄："}},[a("el-input",{attrs:{placeholder:"请输入",value:t.personData.age,maxlength:"3"},on:{input:function(e){return t.$outInt(e,"age",t.personData)}}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"民族："}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"10"},model:{value:t.personData.nationCase,callback:function(e){t.$set(t.personData,"nationCase",e)},expression:"personData.nationCase"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"身份证号：",prop:"idNo"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"18"},model:{value:t.personData.idNo,callback:function(e){t.$set(t.personData,"idNo",e)},expression:"personData.idNo"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"体检日期："}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.personData.examDate,callback:function(e){t.$set(t.personData,"examDate",e)},expression:"personData.examDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"户籍地址：",prop:"residenceAddress"}},[t._v("\n                "+t._s(t.personData.residenceAddress)+"\n                ")])],1),a("el-col",{staticStyle:{height:"51px",visibility:"hidden"},attrs:{span:6}}),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"操作医生："}},[t._v(t._s(t._f("emptyData")(t.personData.createUserName)))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"form-item long-ipt",attrs:{label:"现住址：",prop:"liveAddress"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"51"},model:{value:t.personData.liveAddress,callback:function(e){t.$set(t.personData,"liveAddress",e)},expression:"personData.liveAddress"}})],1)],1),a("el-col",{staticStyle:{height:"51px",visibility:"hidden"},attrs:{span:6}}),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"联系电话：",prop:"contactPhone"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"13"},model:{value:t.personData.contactPhone,callback:function(e){t.$set(t.personData,"contactPhone",e)},expression:"personData.contactPhone"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"form-item long-ipt",attrs:{label:"医疗机构："}},[t._v("\n                "+t._s(t.personData.registerOrganization||t.personData.createOrganizationName)+"\n              ")])],1)],1)],1)],1)]),a("div",{staticClass:"bottom"},[t._m(2),a("div",{staticClass:"body flex"},[a("div",{staticClass:"left-box"},[a("h4",[t._v("未选项目")]),a("div",{staticClass:"item-box"},[a("div",{staticClass:"head-search"},[a("el-input",{attrs:{placeholder:"请输入项目名称，套餐名称简码"},on:{change:t.getprojetData},model:{value:t.projectinput,callback:function(e){t.projectinput=e},expression:"projectinput"}}),a("span",{staticClass:"icon iconfont bj-search hand-shape"})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"itembox"},[this.projectData.length>0?a("div",{staticClass:"itemlist"},[0==t.checkstatus?a("div",{staticClass:"itemtitle"},[t._v("项目")]):t._e(),1==t.checkstatus?a("div",{staticClass:"itemtitle"},[t._v("常用项目")]):t._e(),a("div",{staticClass:"ulitem"},t._l(t.projectData,function(e,s){return a("div",{key:s,staticClass:"liitem",class:{active:t.handleMaxProjectActive(e)},on:{click:function(a){return t.getevent(s,e)}}},[t._v(t._s(e.pname))])}),0)]):t._e(),this.medicalData.length>0?a("div",{staticClass:"itemlist"},[0==t.checkstatus?a("div",{staticClass:"itemtitle"},[t._v("套餐")]):t._e(),1==t.checkstatus?a("div",{staticClass:"itemtitle"},[t._v("常用套餐")]):t._e(),a("div",{staticClass:"ulitem"},t._l(t.medicalData,function(e,s){return a("div",{key:e.sysGuid,staticClass:"liitem",class:{active:t.handleSetMealActive(e)},on:{click:function(a){return t.getmedevent(s,e)}}},[t._v(t._s(e.pname))])}),0)]):t._e(),this.projectData.length<=0&&this.medicalData.length<=0?a("div",{staticStyle:{"padding-top":"80px","text-align":"center"}},[t._v("暂无数据")]):t._e()])])]),t._m(3),a("div",{staticClass:"right-box"},[a("h4",[t._v("已选项目")]),a("dl",{staticClass:"flex-v item-box"},[t._m(4),a("dd",{directives:[{name:"show",rawName:"v-show",value:t.selectedlist.length,expression:"selectedlist.length"}],staticClass:"flex-item"},[a("el-collapse",{attrs:{value:"1"}},t._l(t.selectedlist,function(e,s){return a("el-collapse-item",{key:s,attrs:{name:s}},[a("template",{slot:"title"},[a("div",{staticClass:"first-item",on:{click:function(s){return s.stopPropagation(),t.closeItem(e)}}},[a("i",{staticClass:"el-icon-circle-close"})]),a("div",{staticClass:"index"},[t._v(t._s(s+1))]),a("div",{staticClass:"flex flex-item"},[a("div",{staticClass:"text-item"},[t._v(t._s(e.pname))])]),a("div",{staticClass:"last-item"})]),t._l(e.smallProjects,function(s,i){return a("div",{key:i,staticClass:"flex-v-center sub-item"},[a("div",{staticClass:"first-item",on:{click:function(a){return a.stopPropagation(),t.closeItem(s,e)}}},[a("i",{staticClass:"el-icon-circle-close"})]),a("div",{staticClass:"index"}),a("div",{staticClass:"flex flex-item"},[a("div",{staticClass:"text-item"},[t._v(t._s(s.pname))]),a("div",{staticClass:"text-item"},[t._v("\n                        "+t._s(1==s.isCheck?"已检查":"未检查")+"\n                      ")]),a("div",{staticClass:"text-item"},[t._v("未同步")])]),a("div",{staticClass:"last-item"})])})],2)}),1)],1)])])])]),a("footer",{staticClass:"btn-box"},[a("el-button",{staticClass:"btn-hollowing",on:{click:function(e){return t.$router.back()}}},[t._v("取消")]),a("el-button",{staticClass:"btn-info",attrs:{loading:t.submitLoading},on:{click:t.goCheckInDetail}},[t._v("保存")])],1)])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top-head"},[s("i",{staticClass:"iconfont bj-person"}),t._v("  体检人员\n      ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("要求：jpg/png格式"),s("br"),t._v("150 x 180效果最佳")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bottom-head"},[s("i",{staticClass:"iconfont bj-menu"}),t._v("  体检项目\n      ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"arrow-box flex-v-center"},[s("div",{staticClass:"iconfont bj-arrow-right"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("dt",{staticClass:"flex"},[s("div",{staticClass:"first-item"}),s("div",{staticClass:"index"},[t._v("序号")]),s("div",{staticClass:"flex flex-item"},[s("div",{staticClass:"dt-title"},[t._v("检查项目")]),s("div",{staticClass:"dt-title"},[t._v("项目名称")]),s("div",{staticClass:"dt-title"},[t._v("体检状态")]),s("div",{staticClass:"dt-title"},[t._v("数据传输")])]),s("div",{staticClass:"last-item"})])}],r=(s("6b54"),s("cebc")),n=(s("20d6"),s("28a5"),s("456d"),s("ac6a"),s("7f7f"),s("75fc")),c=s("b279");function o(t){return JSON.parse(JSON.stringify(t))}var l={name:"CheckInPersonnel",data:function(){return{prevRoute:{},routelist:[],sysGuid:"",tjsysGuid:"",examsysGuid:"",checkstatus:1,pagestatic:"",examNum:0,personData:{userName:"",sexTypeStr:"",sexType:"",birthdayStr:"",birthday:"",age:"",nationCase:"",idNo:"",examDate:"",residenceAddress:"",liveAddress:"",contactPhone:"",registerOrganization:"",createOrganizationName:"",sysGuid:"-",createUserName:"",personType:"",historyTraumaJson:"",historyTransfusionJson:"",historyOperationJson:"",historyIllnessJson:"",historyFamilyJson:""},medicalData:[],projectData:[],isactivelist:[],ismedactivelist:[],projectinput:"",selectedlist:[],projectIdslist:[],packIdList:[],imageUrl:"",pySimpleCode:"",bigProject:[],smallProject:[],setMealObj:{},sex:"",rules:{userName:[{required:!0,message:"请输入姓名",trigger:"blur"}].concat(Object(n["a"])(Object(c["i"])(30))),idNo:{pattern:c["m"],message:"请输入正确的身份证号码",trigger:"blur"},contactPhone:{pattern:c["n"],message:"请输入正确的电话号码",trigger:"blur"},residenceAddress:Object(n["a"])(Object(c["i"])()),liveAddress:Object(n["a"])(Object(c["i"])())},loading:!0,submitLoading:!1,uploadFileUrl:Object(c["b"])("/common/file/uploadFile")}},created:function(){console.log(this.uploadFileUrl),this.oftenUse=Object.create(null),this.projectObj=Object.create(null),this.sysGuid=this.$route.query.sysGuid,this.tjsysGuid=this.$route.query.tjsysGuid,this.getusedData()},beforeRouteEnter:function(t,e,s){var a=e.name,i=e.query,r=e.meta.title,n=["CheckInDetail","PersonList"];s(function(t){t.prevRoute={name:a,title:r,query:i,isShow:~n.indexOf(a)}})},methods:{getData:function(){var t=this,e="/sys/project/getShowExam";this.$post(e,{sysGuid:this.tjsysGuid}).then(function(e){var s=e.data,a=s.user;t.getExamNum(a.idNo),Object.keys(t.personData).forEach(function(e){t.personData[e]=a[e]}),t.personData.birthday=Object(c["g"])(a.birthday),t.personData.examDate=Object(c["g"])(new Date),t.examsysGuid=a.sysGuid,t.imageUrl=a.addOn1,t.bigProject=s.bigProject,t.smallProject=s.smallProject,t.selectedlist=s.bigProject.map(function(e){var a=t.projectIdslist.indexOf(e.sysGuid);-1===a&&t.projectIdslist.push(e.sysGuid);var i={pname:e.pname,sysGuid:e.sysGuid,smallProjects:[]};return s.smallProject.forEach(function(s){s.sysGuid=s.projectId;var a=t.projectIdslist.indexOf(s.projectId);-1===a&&t.projectIdslist.push(s.projectId),e.sysGuid===s.parentId&&i.smallProjects.push(s)}),i})}).catch(function(e){t.$message.error(e)})},getExamNum:function(t){var e=this;this.$post("/user/examUser/getExamTimes",{idNo:t,type:"total"}).then(function(t){var s=t.data;e.examNum=s.split(",")[0]}).catch(function(t){return t})},getpersonData:function(){var t=this;if("add"!==this.tjsysGuid)return this.getData();var e="user/getPersionDoc/getByPage",s={sysGuid:this.sysGuid,pageNum:1,pageSize:1};this.$post(e,s).then(function(e){var s=e.data,a=s.list[0];t.getExamNum(a.idNo),Object.keys(t.personData).forEach(function(e){t.personData[e]=a[e]}),t.personData.createOrganizationName=a.registerOrganization,t.personData.birthday=Object(c["g"])(a.birthday);var i=[],r=[];["ProvinceName","CityName","CountyName","TownName","VillageName"].forEach(function(t){a["residence".concat(t)]&&i.push(a["residence".concat(t)]),a["live".concat(t)]&&r.push(a["live".concat(t)])}),t.personData.residenceAddress=i.join(""),t.personData.liveAddress=r.join(""),t.personData.contactPhone=a.mobile,t.personData.examDate=Object(c["g"])(new Date)}).catch(function(e){e&&t.$message.error(e)})},getusedData:function(){var t=this,e="/sys/projectPackage/findUserHabitsProjectAndPackage";this.medicalObj=Object.create(null),this.$post(e).then(function(e){var s=e.data;t.loading=!1,t.medicalData=s.packPage.list.map(function(e){return e.isactive=!1,t.medicalObj[e.packId]=0,{isactive:!1,pname:e.pname,sysGuid:e.packId}}),t.projectData=s.projPage.list.map(function(t){return{isactive:!1,pname:t.pname,sysGuid:t.projectId}}),t.oftenUse.medicalData=o(t.medicalData),t.oftenUse.projectData=o(t.projectData),t.getpersonData()}).catch(function(e){e&&t.$message.error(e)})},getevent:function(t,e){var s=this;if(!e.isactive){var a="/sys/project/getBigProjectSmallProject";this.$post(a,{projectId:e.sysGuid}).then(function(t){var a=t.data;if(0===a.smallProjects.length)return s.$message.warning("该项目下没有小项");e.isactive=!0,-1===s.selectedlist.findIndex(function(t){return t.sysGuid===a.sysGuid})&&(s.selectedlist.push(a),s.projectIdslist=s.projectIdslist.concat(a.sysGuid,a.smallProjects.map(function(t){return t.sysGuid})))}).catch(function(t){s.$message.error(t)})}},getmedevent:function(t,e){var s=this;if(!e.isactive){var a="/sys/projectPackage/getThisPackProject",i=e.sysGuid;this.$post(a,{packId:i}).then(function(t){var a=t.data;if(0===a.projects.length)return s.$message.warning("该套餐下没有项目");s.medicalObj[i]=a.projects.length,-1===s.packIdList.indexOf(i)&&s.packIdList.push(i),e.isactive=!0;var r=0;a.projects.forEach(function(t){s.projectObj[t.sysGuid]=s.projectObj[t.sysGuid]||[],-1===s.projectObj[t.sysGuid].indexOf(i)&&s.projectObj[t.sysGuid].push(i),t.packageIds=s.projectObj[t.sysGuid];var e=s.selectedlist.findIndex(function(e){return e.sysGuid===t.sysGuid});if(~e){r++;var a=s.selectedlist[e];a.packageIds=t.packageIds,s.selectedlist.splice(e,1,a)}else s.selectedlist.push(t),s.projectIdslist=s.projectIdslist.concat(t.sysGuid,t.smallProjects.map(function(t){return t.sysGuid}))}),a.projects.length===r&&s.$message("此套餐中的项目已被全部选中！"),console.log(s.projectIdslist)}).catch(function(t){s.$message.error(t)})}},handleMaxProjectActive:function(t){var e=t.projectId||t.sysGuid,s=~this.projectIdslist.indexOf(e);return t.isactive=s,s},handleSetMealActive:function(t){var e=t.packId||t.sysGuid,s=~this.packIdList.indexOf(e);return t.isactive=s,s},fuzzyserchData:function(){var t=this,e="/sys/projectPackage/searchPackAndProject",s={keyword:this.projectinput};this.$post(e,s).then(function(e){var s=e.data;t.loading=!1,t.medicalData=s.projectPackPage.list.map(function(e){var s=e.packName,a=e.sysGuid;return t.medicalObj[a]=t.medicalObj[a]||0,{isactive:!1,pname:s,sysGuid:a}}),t.projectData=s.projectPage.list.map(function(t){return{isactive:!1,pname:t.pname,sysGuid:t.sysGuid}})}).catch(function(e){t.loading=!1,t.$message.error(e)})},getprojetData:function(){this.projectinput?(this.loading=!0,this.checkstatus=0,this.fuzzyserchData()):(this.checkstatus=1,this.medicalData=o(this.oftenUse.medicalData),this.projectData=o(this.oftenUse.projectData))},closeItem:function(t,e){var s=this,a=t.sysGuid;if(e){if(1==t.isCheck)return this.$message.warning("此小项已检查，不能删除！");var i=e.smallProjects.findIndex(function(t){return t.sysGuid===a}),r=this.projectIdslist.indexOf(a);if(this.projectIdslist.splice(r,1),e.smallProjects.splice(i,1),0===e.smallProjects.length){var n=this.selectedlist.findIndex(function(t){return t.sysGuid===e.sysGuid}),c=this.projectIdslist.indexOf(e.sysGuid),o=e.packageIds;this.selectedlist.splice(n,1),this.projectIdslist.splice(c,1),o&&o.forEach(function(t){if(s.medicalObj[t]--,0===s.medicalObj[t]){var e=s.packIdList.indexOf(t);~e&&s.packIdList.splice(e,1)}})}}else{if(console.log(this.projectIdslist),t.smallProjects.some(function(t){return 1==t.isCheck}))return this.$message.warning("有小项已检查，不能删除！");var l=this.projectIdslist.indexOf(a);~l&&this.projectIdslist.splice(l,1),t.smallProjects.forEach(function(t){console.log(t);var e=s.projectIdslist.indexOf(t.sysGuid);~e&&s.projectIdslist.splice(e,1)}),t.packageIds&&t.packageIds.forEach(function(t){if(s.medicalObj[t]--,0===s.medicalObj[t]){var e=s.packIdList.indexOf(t);~e&&s.packIdList.splice(e,1)}});var d=this.selectedlist.findIndex(function(t){return t.sysGuid===a});~d&&this.selectedlist.splice(d,1),console.log(this.projectIdslist)}},goCheckInDetail:function(){var t=this;this.$refs["personData"].validate(function(e){e&&t.postCheckInData()})},postCheckInData:function(){var t=this,e="",s=Object(r["a"])({},this.personData,{addOn1:this.imageUrl,packIds:this.packIdList.toString(),projectIds:this.projectIdslist.toString()});if("add"===this.tjsysGuid?e="/user/examUser/insert":(e="/user/examUser/updateUserExamItem",s.sysGuid=this.tjsysGuid),0===this.projectIdslist.length)return this.$message.warning("至少选择一个项目！");this.submitLoading=!0,this.$post(e,s).then(function(e){var s=e.data;t.submitLoading=!1,t.tjsysGuid=s.sysGuid,t.$router.push({name:"CheckInDetail",query:{tjsysGuid:s.sysGuid,sysGuid:t.sysGuid}})}).catch(function(e){t.submitLoading=!1,t.$message.error(e)})},handleAvatarSuccess:function(t){var e=t.data;this.imageUrl=Object(c["b"])(e.filePath)},beforeAvatarUpload:function(t){var e=~["image/jpeg","image/png","image/jpg"].indexOf(t.type),s=t.size/1024/1024<2;return e||this.$message.warning("上传头像图片只能是jpg/png格式!"),s||this.$message.warning("上传头像图片大小不能超过2MB!"),e&&s}}},d=l,u=(s("0fdc"),s("2877")),p=Object(u["a"])(d,a,i,!1,null,"779827a0",null);e["default"]=p.exports},"95d5":function(t,e,s){var a=s("40c3"),i=s("5168")("iterator"),r=s("481b");t.exports=s("584a").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||r.hasOwnProperty(a(e))}},9717:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAC0CAMAAABBuyXtAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABaUExURff7+e708vL39fX5+Ozz8fP39u/18+vy8PT49/b5+PH29PH29e3z8ezy8PD19Pb6+e308vX59+3z8vD29O/08/X49/P49vL29e708/D18/L39vT49vb6+Ozy8SPJNT4AAAPQSURBVHja7dsJctwgEAVQJAENAglpdjvO/a8ZeSqJE8ces3wQleKf4JWWptmYqzKssRqrsRqrsRqrsRqrsRqrsRqrJtYqzHxaLJ+IOF9O8/N5b5a+jN2meZ/vUuzH0s83+jTc7MNSkh6HX8qzxEJfxxRmKR/UlrEkS0vyjdDFWIpTQLiMo4WyDAVHquysmWLSrXlZkiIz5mRFq7YHprOxRkoIXzOxBCWFD1lYw5TGIqtzsDpKzS0Dq6f0GDhLcwCLNJo1IlQkwSw9QViksCyDUXk/Lk8WB7FoQLIUSkVHJOsJxuJIFuwd+n70rOw79H2LrOR/+JoDjiWBLL9Kzwp/WkQXFEsjVX79Myv8xXsWeh9WD2VZFGuEsgjFmrEsDWJJLOsMYt2wLAVidViWqJPV/9+sU50s2Vj7lVPUn2jqZPV1llNsY+M1VfRhDXV2EG5CqjiMtSBZBxjrCcmCNc3uimQZGAv6K37DrUHUOX1FtjbAyT5y7jPiWBpYIbiCsSy0nKImZEfs4DODWBMVHxRZ8QbCq3J5sHo0q4ewDJplIKxrnU9LoFkCwlrRrAFTIKjKAuEOWFVXZ5UfQSxwPV2rHKo7WAcBLRG4xgbZnc4Ox9Kw13iC7lW/YKaKtndQVtCRwMQ+PuyMTV9kMAxmAdZtdAZW+hjUuRysa7l3GMJ6Sdwbti4LK7V7FplYaVvpncvFuiSopiEbK2U/o3f5WPEtjnQ5Weesq1rRrMjWK+gobAwrqqh+z3wCPHJlMPzAfMRdjGN+VdQVkbDnxSNUcRdqQlovO7hSLKe865eMu7wSeysKuUvXWI3VWI3VWI3ltX6DX3ZAsLzXSYaiLO+pxrkoS2XsTBNY3hMgUZTl3Z+aoizvEwi8JCtgEnstxwq5FTiVm2IEbWpYXYgVeJj4oEuwdPAGEC8w2RcxK5VjZtYQeRrcioysIeF0s33OxFKJm1F8xG+uaIPYUuwElCVgl1cmibradgEf4+ezSmapJ074fCl7yDofc5h+/QBrFEv3C+XN0gezzk9UINM8hLBUR6XSKV9WQdRnsH9Z641KRw5fso60R8xjlrK0T5bhAcvQbpnEpyxJe8Z8zNIL7Zv5I5Y+EFXjemPtr/rjPbLIWVamiHessQrV7zk4C1yvyj4S/cWytbB+HuNgNb3Ct5UnFrRuXOxvZPsNz48e1ytLTzWx7kWCuQx3QNJ/Rubgd/KTo++soTLVa41gGW6mpOZ0Z91qY0131lQbi9aNtVan2koEw98uSs+4scb6WHJjyfpY3cbq6mPZjWXrY/GNVV99IHI/AOFBq+uO8QzPAAAAAElFTkSuQmCC"},aae3:function(t,e,s){var a=s("d3f4"),i=s("2d95"),r=s("2b4c")("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==i(t))}},bc1a:function(t,e,s){},c8bb:function(t,e,s){t.exports=s("54a1")},cd1c:function(t,e,s){var a=s("e853");t.exports=function(t,e){return new(a(t))(e)}},d2d5:function(t,e,s){s("1654"),s("549b"),t.exports=s("584a").Array.from},e853:function(t,e,s){var a=s("d3f4"),i=s("1169"),r=s("2b4c")("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),a(e)&&(e=e[r],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-2f978e57.567314b0.js.map
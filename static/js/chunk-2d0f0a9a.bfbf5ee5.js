(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f0a9a"],{"0744":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("medical-report-html",{attrs:{user:t.user,projectList:t.projectList}})],1)},r=[],i=a("7dae"),n=a("dbef"),l={name:"previewReport",components:{MedicalReportHtml:n["a"]},props:{examUserId:{type:String,required:!0},showPreview:Boolean},data:function(){return{user:{},projectList:[]}},methods:{getExamReport:function(t){var e=this;this.$post("/user/examUser/showReportExam",{examUserId:t}).then(function(t){var a=t.data;e.user=a.user,e.projectList=a.smallProjectList}).catch(function(t){e.$message.error(t)})},printPage:function(){var t=this;this.$confirm("确定打印视为打印一次！",{title:"温馨提示",showClose:!1,customClass:"msg-box"}).then(function(){var e=t.$loading({text:"打印准备中..."});t.$post("/user/examUser/printRecord",{idList:t.examUserId}).then(function(){console.log("统计打印成功"),Object(i["a"])(t.$el,"体检报告"),setTimeout(function(){e.close()},800)}).catch(function(a){console.log("打印记录失败，无法打印！",a),e.close(),t.$message.error("打印记录失败，无法打印！")})}).catch(function(t){return t})}},watch:{examUserId:{handler:function(t){""!==t&&this.getExamReport(t)},immediate:!0}}},o=l,c=a("2877"),u=Object(c["a"])(o,s,r,!1,null,"2b215842",null);e["default"]=u.exports},"2f21":function(t,e,a){"use strict";var s=a("79e5");t.exports=function(t,e){return!!t&&s(function(){e?t.call(null,function(){},1):t.call(null)})}},"55dd":function(t,e,a){"use strict";var s=a("5ca1"),r=a("d8e8"),i=a("4bf8"),n=a("79e5"),l=[].sort,o=[1,2,3];s(s.P+s.F*(n(function(){o.sort(void 0)})||!n(function(){o.sort(null)})||!a("2f21")(l)),"Array",{sort:function(t){return void 0===t?l.call(i(this)):l.call(i(this),r(t))}})},dbef:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"print-page"},[s("div",{staticClass:"print-body flex-v"},[s("p",{staticClass:"text"},[t._v("\n        体检流水号："+t._s(t.user.examUserId)+"，体检日期："+t._s(t._f("formatDate")(t.user.examDate,"Y年M月D日"))+"\n      ")]),s("div",{staticClass:"avatar",staticStyle:{height:"180px","text-align":"right"}},[t.user.addOn1?s("img",{attrs:{src:t.user.addOn1,width:"150"}}):[2==t.user.sexType?s("img",{attrs:{src:a("1b66"),width:"150"}}):s("img",{attrs:{src:a("9717"),width:"150"}})]],2),s("div",{staticClass:"content flex-v"},[s("div",{staticClass:"title"},[t._v("\n          "+t._s(t.user.createOrganizationName)),s("br"),t._v("健康体检报告\n        ")]),s("div",{staticClass:"logo flex-v-center"},[s("img",{attrs:{src:t.user.createOrganizationIdLogo}})]),s("ul",{staticClass:"userinfo"},[s("li",[s("label",[t._v("体检流水号")]),s("span",[t._v("："+t._s(t.user.examUserId))])]),s("li",[s("label",[t._v("身份证号")]),s("span",[t._v("："+t._s(t.idNo))])]),s("li",[s("label",[t._v("姓名")]),s("span",[t._v("："+t._s(t.user.userName))])]),s("li",[s("label",[t._v("性别")]),s("span",[t._v("："+t._s(1==t.user.sexType?"男":2==t.user.sexType?"女":"不详"))])]),s("li",[s("label",[t._v("年龄")]),s("span",[t._v("："+t._s(t.user.age))])]),s("li",[s("label",[t._v("联系电话")]),s("span",[t._v("："+t._s(t.user.contactPhone))])]),s("li",[s("label",[t._v("体检日期")]),s("span",[t._v("："+t._s(t._f("formatDate")(t.user.examDate)))])]),s("li",[s("label",[t._v("现住址")]),s("span",[t._v("："+t._s(t.user.liveAddress))])])])])])]),s("div",{staticClass:"print-page"},[s("div",{staticClass:"print-body flex-v"},[s("p",{staticClass:"text"},[t._v("\n        体检流水号："+t._s(t.user.examUserId)+"，体检日期："+t._s(t._f("formatDate")(t.user.examDate,"Y年M月D日"))+"\n      ")]),s("div",{staticClass:"content"},[s("h3",{staticClass:"title-item",staticStyle:{margin:"20px 0"}},[t._v("项目目录")]),s("el-table",{staticStyle:{"min-width":"960px","max-width":"100%"},attrs:{data:t.pList,"span-method":t.mergeMethod,border:""}},[s("el-table-column",{attrs:{label:"科室",prop:"deptName"}}),s("el-table-column",{attrs:{label:"检查项目名称",prop:"parentName"}}),s("el-table-column",{attrs:{label:"检查小项名称",prop:"pname"}}),s("el-table-column",{attrs:{label:"是否检查",prop:"isCheck",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(1==e.row.isCheck?"已检":"未检")+"\n            ")]}}])}),s("el-table-column",{attrs:{label:"检查医生",prop:"oneAuthUserName"}}),s("el-table-column",{attrs:{label:"体检日期",prop:"updateDate",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t._f("formatDate")(e.row.updateDate))+"\n            ")]}}])})],1)],1)])]),s("div",{staticClass:"print-page"},[s("div",{staticClass:"print-body content-center",staticStyle:{margin:"20px",padding:"0","overflow-x":"hidden"}},[s("p",{staticClass:"text",staticStyle:{width:"100%","text-align":"left"}},[t._v("\n        体检流水号："+t._s(t.user.examUserId)+"，体检日期："+t._s(t._f("formatDate")(t.user.examDate,"Y年M月D日"))+"\n      ")]),s("div",{staticClass:"content"},[s("h3",{staticClass:"title-item"},[t._v("检查结论：")]),5==t.user.examStatus?t._l(t.maxProjectList,function(e){return s("div",{key:e.projectId,staticStyle:{"margin-top":"30px"}},[s("div",{staticClass:"text flex"},[s("span",{staticClass:"icon"},[t._v("★")]),t._v("\n              "+t._s(e.name)+"：\n              "),s("pre",{staticClass:"flex-item",staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(t.concatStr(e.smallProjectList,"checkConclusion")))])]),s("div",{staticClass:"min-text flex"},[t._v("\n              诊断意见或印象：\n              "),s("pre",{staticClass:"flex-item",staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(t.concatStr(e.smallProjectList,"checkProposal")))])])])}):t._e(),s("div",{staticClass:"dotted-line"}),s("h3",{staticClass:"title-item"},[t._v("温馨提示：")]),5==t.user.examStatus?s("ol",{staticClass:"ol-list"},[t._l(t.projectList,function(e){return[e.checkWaring?s("li",{key:e.projectId},[t._v(t._s(e.checkWaring))]):t._e()]})],2):t._e(),s("div",{staticClass:"tfoot",staticStyle:{"font-size":"14px","border-bottom":"0 none"}},[t._v("\n          检查日期："+t._s(t._f("formatDate")(5==t.user.examStatus&&t.user.twoAuthUserTime))+"\n            \n          检查医生："+t._s(t._f("emptyData")(t.user.twoAuthUserName))+"\n        ")])],2)])]),s("div",{staticClass:"print-page"},[s("div",{staticClass:"print-body flex-v"},[s("p",{staticClass:"text"},[t._v("\n        体检流水号："+t._s(t.user.examUserId)+"，体检日期："+t._s(t._f("formatDate")(t.user.examDate,"Y年M月D日"))+"\n      ")]),s("div",{staticClass:"content"},t._l(t.maxProjectList,function(e){return s("div",{key:e.id},[s("h3",{staticClass:"title-item"},[t._v(t._s(e.name))]),1==e.type?s("div",{staticClass:"table-border"},[s("el-table",{attrs:{data:e.smallProjectList}},[s("el-table-column",{attrs:{label:"序号",type:"index"}}),s("el-table-column",{attrs:{label:"项目名称",prop:"pname"}}),s("el-table-column",{attrs:{label:"检查结果",prop:"checkValue"}}),s("el-table-column",{attrs:{label:"单位",prop:"projectSymbol",width:"100"}}),s("el-table-column",{attrs:{label:"参考值",prop:"rule",width:"160"}}),s("el-table-column",{attrs:{label:"提示",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("i",{directives:[{name:"show",rawName:"v-show",value:-1===t.isNormal(e.row),expression:"isNormal(scope.row)===-1"}],staticClass:"el-icon-bottom",staticStyle:{"font-size":"20px",color:"#5AD4BB"}}),s("i",{directives:[{name:"show",rawName:"v-show",value:1===t.isNormal(e.row),expression:"isNormal(scope.row)===1"}],staticClass:"el-icon-top",staticStyle:{"font-size":"20px",color:"#FE6F71"}})]}}],null,!0)})],1),s("div",{staticClass:"info flex"},[t._v("\n              小结：\n              "),s("pre",{staticClass:"flex-item",staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(t.concatStr(e.smallProjectList,"checkConclusion")))])]),s("div",{staticClass:"tfoot"},[t._v("\n              检查日期："+t._s(t._f("formatDate")(e.oneAuthUserTime))+"\n                \n              检查医生："+t._s(t._f("emptyData")(e.oneAuthUserName))+"\n            ")])],1):t._e(),2==e.type?s("div",{staticClass:"text-2",staticStyle:{width:"960px","max-width":"100%"}},[s("div",{staticClass:"text-2-box"},[s("div",{staticClass:"flex"},[s("label",[t._v("检查部位：")]),s("div",{staticClass:"flex-item"},[t._v("\n                  "+t._s(t.concatStr(e.smallProjectList,"checkPart","、"))+"\n                ")])]),s("div",{staticClass:"flex",staticStyle:{"margin-top":"20px"}},[s("label",[t._v("检查结论：")]),s("div",{staticClass:"flex-item",staticStyle:{overflow:"hidden"}},[s("pre",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(t.concatStr(e.smallProjectList,"checkConclusion")))])])])]),s("div",{staticClass:"tfoot"},[t._v("\n              检查日期："+t._s(t._f("formatDate")(e.oneAuthUserTime))+"\n                \n              检查医生："+t._s(t._f("emptyData")(e.oneAuthUserName))+"\n            ")])]):t._e(),3==e.type?s("div",{staticClass:"table-border"},[s("el-table",{attrs:{data:e.smallProjectList}},[s("el-table-column",{attrs:{label:"序号",type:"index"}}),s("el-table-column",{attrs:{label:"项目名称",prop:"pname"}}),s("el-table-column",{attrs:{label:"检查结果",prop:"checkValue"}})],1),s("div",{staticClass:"tfoot"},[t._v("\n              检查日期："+t._s(t._f("formatDate")(e.oneAuthUserTime))+"\n                \n              检查医生："+t._s(t._f("emptyData")(e.oneAuthUserName))+"\n            ")])],1):t._e()])}),0)])])])},r=[],i=(a("55dd"),a("456d"),a("ac6a"),a("28a5"),a("768b")),n=(a("c5f6"),a("62c5"),{name:"MedicalReportHtml",props:{user:{type:Object,default:function(){return{}}},projectList:{type:Array,default:function(){return[]}}},methods:{mergeMethod:function(t){var e=t.row,a=(t.column,t.rowIndex,t.columnIndex);if(0===a)return e.rowSpan?[e.rowSpan,1]:[0,0]},isNormal:function(t){var e=t.rule,a=t.checkValue,s=Number(a);if(""===a||isNaN(s))return 0;var r=e.split(" - "),n=Object(i["a"])(r,2),l=n[0],o=n[1],c=l?Number(l):"",u=o?Number(o):"";return""!==c&&s<c?-1:""!==u&&s>u?1:0},handleCheckPart:function(t){return t.map(function(t){return t.checkPart}).join("、")},concatStr:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return t.map(function(t){return t[e]}).join(a)}},computed:{maxProjectList:function(){if(!this.projectList.length)return[];var t={};return this.projectList.forEach(function(e){t[e.parentId]?t[e.parentId].smallProjectList.push(e):t[e.parentId]={id:e.parentId,name:e.parentName,type:e.resultType,oneAuthUserName:e.oneAuthUserName,oneAuthUserTime:e.oneAuthUserTime,smallProjectList:[e]}}),Object.keys(t).map(function(e){return t[e]})},pList:function(){if(!this.projectList.length)return[];var t=this.projectList.sort(function(t,e){return t.parentId-e.parentId}).sort(function(t,e){return t.deptId-e.deptId}),e={};return t.forEach(function(t){e[t.deptId]?e[t.deptId]++:e[t.deptId]=1}),Object.keys(e).forEach(function(a){for(var s,r=0;s=t[r++];)if(s.deptId===a){s.rowSpan=e[a];break}}),t},idNo:function(){var t=this.user.idNo;if(!t)return"";var e=t.slice(0,6),a=t.slice(-4);return"".concat(e,"********").concat(a)}}}),l=n,o=(a("ed6a"),a("2877")),c=Object(o["a"])(l,s,r,!1,null,"4880e360",null);e["a"]=c.exports},dedf:function(t,e,a){},ed6a:function(t,e,a){"use strict";var s=a("dedf"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-2d0f0a9a.bfbf5ee5.js.map